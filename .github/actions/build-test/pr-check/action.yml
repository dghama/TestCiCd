name: 'Install dependencies'

runs:
  using: 'composite'
  steps:
    - name: ğŸ“¦ Restore node modules from cache
      uses: ./.github/actions/cache-restore

    - name: ğŸš‘  Run type check
      run: yarn typecheck
      shell: bash

    - name: ğŸƒâ€â™‚ï¸ Run tests with coverage
      run: yarn test --coverage
      shell: bash

   - name: Jest Coverage Comment
      uses: MishaKav/jest-coverage-comment@main
      if: (success() || failure()) && github.event_name == 'pull_request'
      with:
          coverage-summary-path: ./coverage/coverage-summary.json
          summary-title: "ğŸ’¯ Test Coverage"
          badge-title: Coverage
          create-new-comment: false
          junitxml-title: ğŸ˜ Tests Results
          junitxml-path: ./coverage/jest-junit.xml
          coverage-title: ğŸ‘€ Tests Details
          coverage-path: ./coverage/coverage.txt
          report-only-changed-files: true
          
    #    - name: ğŸƒâ€â™‚ï¸ Run lint
    #      run: yarn lint
    #      shell: bash
